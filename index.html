<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./public/styles.css" />
    <title>경매 사이트</title>
  </head>
  <body>
        <!-- 로그인 팝업 -->
<div id="loginPopup" class="popup">
  <div class="popup-content">
    <span class="close-btn" onclick="closePopup()">✖</span>
    <form id="loginForm">
      <!-- 이메일 입력 -->
      <div class="form-group">
        <input type="text" id="username" placeholder="아이디" required />
      </div>
      <!-- 비밀번호 입력 -->
      <div class="form-group password-group">
        <input type="password" id="password" placeholder="비밀번호" required />
        <span class="password-toggle" onclick="togglePassword()">👁️</span>
      </div>
      <!-- 로그인 버튼 -->
      <div class="form-group">
        <button type="submit" class="login-btn">로그인</button>
      </div>
      <!-- 하단 링크 -->
      <div class="links">
        <a href="/find-id">아이디(이메일) 찾기</a> |
        <a href="/find-password">비밀번호 찾기</a> |
        <a href="./public/signup.html">회원가입</a>
      </div>
    </form>
  </div>
</div>
    <!-- 상단 헤더 -->
    <div class="header">
      <!-- 로고 이미지 -->
      <img
        src="auction_forest_logo.png"
        alt="거래해요 경매의 숲"
        class="logo"
        onclick="goToMain()"
      />

      <!-- 가운데 검색창 -->
      <div class="search-container">
        <input
          type="text"
          class="search-bar"
          placeholder="검색어를 입력하세요"
        />
        <span class="search-icon">🔍</span>
      </div>

      <!-- 마이페이지,로그인,상품등록 버튼 -->
      <div class="button-group">
      <button class="register" onclick="goToRegister()">상품 등록</button>
      <button class="login-button" onclick="goToLogin()">로그인</button>
      <button class="my-page" onclick="showMyPage()">마이페이지</button>
      </div>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="main-container">
      <!-- 메인 이미지 -->
      <img
        src="./public/images/main_homepage.jpg"
        alt="메인 이미지"
        class="main-image"
      />

      <!-- 경매 사용 방법 설명 -->
      <div class="overlay-content">
        <h2>거래해요 경매의 숲💸</h2>
        <p>
          경매의 숲에서는 다양한 상품을 손쉽게 경매로 만나볼 수 있습니다.
          관심있는 상품에 입찰하고, 빠르고 안전하게 결제와 배송을 진행하세요.
          자동 입찰 기능을 통해 더 편리하게 경매에 참여해 보세요!
        </p>
      </div>
    </div>

    <!-- 실시간 랭킹 -->
    <div class="ranking">
      <h3>실시간 랭킹</h3>
      <div class="ranking-item">1. 경매 물품 A</div>
      <div class="ranking-item">2. 경매 물품 B</div>
      <div class="ranking-item">3. 경매 물품 C</div>
      <div class="ranking-item">4. 경매 물품 D</div>
      <div class="ranking-item">5. 경매 물품 E</div>
    </div>

    <!-- 카테고리 버튼들 -->
    <div class="categories">
      <button class="category-button" onclick="openCategory('원피스')">
        원피스
      </button>
      <button class="category-button" onclick="openCategory('전기자전거')">
        전기자전거
      </button>
      <button class="category-button" onclick="openCategory('식품')">
        식품
      </button>
      <button class="category-button" onclick="openCategory('가전제품')">
        가전제품
      </button>
      <button class="category-button" onclick="openCategory('뷰티/미용')">
        뷰티/미용
      </button>
      <button class="category-button" onclick="openCategory('도서')">
        도서
      </button>
    </div>

    <script>
      // 메인 화면으로 돌아가는 함수
      function goToMain() {
        window.location.href = "index.html"; // 메인 페이지로 이동
      }

      // 마이페이지 버튼 클릭 시 리스트 표시
      function showMyPage() {
        window.location.href = "./public/mypage.html"; // 마이 페이지로 이동
      }
      // 상품 등록 페이지 이동
      function goToRegister() {
        window.location.href = "./public/registration.html";
      }

      // 카테고리 버튼 클릭 시 창 열기
      function openCategory(categoryName) {
        window.location.href = `./public/category.html?category=${encodeURIComponent(
          categoryName
        )}`;
      }

      function togglePassword() {
  const passwordField = document.getElementById("password");
  const type =
    passwordField.getAttribute("type") === "password" ? "text" : "password";
  passwordField.setAttribute("type", type);
}

      // 팝업 열기
      function goToLogin() {
        document.getElementById("loginPopup").style.display = "flex";
      }

      // 팝업 닫기
      function closePopup() {
        document.getElementById("loginPopup").style.display = "none";
      }

            // 로그인 폼 제출 처리
      document.getElementById("loginForm").addEventListener("submit", function (event) {
        event.preventDefault(); // 기본 제출 방지

        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        // 로그인 요청 처리 (예: 서버로 데이터 전송)
        fetch("/api/login", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ username, password }),
        })
          .then((response) => {
            if (response.ok) {
              alert("로그인 성공!");
              closePopup(); // 팝업 닫기
              // 필요한 경우 페이지 리다이렉트
              window.location.href = "/contacts";
            } else {
              alert("로그인 실패. 아이디와 비밀번호를 확인하세요.");
            }
          })
          .catch((error) => console.error("로그인 중 오류 발생:", error));
      });
    </script>
  </body>
</html>
