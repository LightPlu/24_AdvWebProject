<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë§ˆì´í˜ì´ì§€</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Daum Postcode API ë¡œë“œ -->
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

    <!-- JavaScript íŒŒì¼ ë¡œë“œ -->
    <script src="../controllers/address.js" defer></script>
    <script>
      function goToMain() {
        window.location.href = "../index.html"; // ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
      }
      function goToRegister() {
        window.location.href = "../public/registration.html";
      }

      // ê° í•­ëª©ì— ëŒ€í•œ ë‚´ìš©ì„ ì €ì¥í•˜ëŠ” ê°ì²´
      const contentData = {
        interest:
          "<h2>ê´€ì‹¬ìˆëŠ” ê²½ë§¤ ìƒí’ˆ</h2><p>ì—¬ê¸°ì—ì„œ ê´€ì‹¬ ëª©ë¡ì— ë“±ë¡í•œ ê²½ë§¤ ìƒí’ˆì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>",
        participating:
          "<h2>ë“±ë¡ì¤‘ì¸ ê²½ë§¤ ìƒí’ˆ</h2><p>í˜„ì¬ ë“±ë¡ ì¤‘ì¸ ê²½ë§¤ ìƒí’ˆì˜ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>",
        inquiry: `
        <div class="inquiry-form-container">
    <h2>ë¬¸ì˜í•˜ê¸°</h2>
    <form id="inquiry-form">
      <label for="title">ì œëª©:</label>
      <input type="text" id="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" required /><br /><br />

      <label for="message">ë¬¸ì˜ ë‚´ìš©:</label>
      <textarea id="message" rows="5" placeholder="ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea><br /><br />

      <button type="button" onclick="submitInquiry()">ë¬¸ì˜í•˜ê¸°</button>
    </form>
  `,
        "inquiry-history": "",
        "personal-info":
          "<h2>ê°œì¸ì •ë³´í™•ì¸/ìˆ˜ì •</h2><p>íšŒì›ë‹˜ì˜ ê°œì¸ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>",
        "address-management":
          "<h2>ë°°ì†¡ì§€ê´€ë¦¬</h2><p>ë“±ë¡ëœ ë°°ì†¡ì§€ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>",
      };

      // ì„ íƒëœ í•­ëª©ì˜ ë‚´ìš©ì„ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
      function showContent(contentKey) {
        const contentArea = document.getElementById("content-area");
        if (contentKey === "interest") {
          loadLikedProducts();
        } else if (contentKey === "participating") {
          loadRegisteredProducts();
        } else if (contentKey === "inquiry-history") {
          loadInquiryHistory(); // ë¬¸ì˜ ë‚´ì—­ ë¡œë“œ í•¨ìˆ˜ í˜¸ì¶œ
        } else if (contentKey === "personal-info") {
          loadUpdateInfo(); // íšŒì› ì •ë³´ ìˆ˜ì •
        } else {
          contentArea.innerHTML = contentData[contentKey];
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        updateAuthButton();
      });

      async function updateAuthButton() {
        const authButton = document.querySelector(".login-button");
        const buttonGroup = document.querySelector(".button-group"); // ë²„íŠ¼ ê·¸ë£¹

        // ê¸°ì¡´ ê´€ë¦¬ì ë²„íŠ¼ì´ ìˆìœ¼ë©´ ì œê±°
        const existingAdminButton = document.querySelector(".admin-button");
        if (existingAdminButton) {
          existingAdminButton.remove();
        }

        // ì¿ í‚¤ì—ì„œ í† í° ì¶”ì¶œ
        const cookieToken = document.cookie
          .split("; ")
          .find((row) => row.startsWith("token="));
        if (!cookieToken) {
          // í† í°ì´ ì—†ìœ¼ë©´ ë¡œê·¸ì¸ ë²„íŠ¼ìœ¼ë¡œ ì²˜ë¦¬
          authButton.textContent = "ë¡œê·¸ì¸";
          authButton.onclick = goToLogin;
          return;
        }

        const token = cookieToken.split("=")[1]; // í† í° ê°’ë§Œ ì¶”ì¶œ

        // í† í°ì—ì„œ ì‚¬ìš©ì ì •ë³´ ì¶”ì¶œ
        const userInfo = parseJwt(token); // JWT ë””ì½”ë”©
        const userId = userInfo?.id; // id ê°’ ì¶”ì¶œ

        if (userId) {
          authButton.textContent = "ë¡œê·¸ì•„ì›ƒ";
          authButton.onclick = logout;

          try {
            // ì„œë²„ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­
            const response = await fetch(`/api/members/info?userId=${userId}`, {
              method: "GET",
              headers: { "Content-Type": "application/json" },
            });

            if (response.ok) {
              const userData = await response.json();
              console.log(userData);

              if (userData.member.is_admin) {
                // is_adminì´ trueì¼ ë•Œ ê´€ë¦¬ì ë²„íŠ¼ ì¶”ê°€
                if(!document.querySelector(".admin-button")){
                  const adminButton = document.createElement("button");
                adminButton.textContent = "ê´€ë¦¬ì í˜ì´ì§€";
                adminButton.classList.add("admin-button");
                adminButton.onclick = () => {
                  window.location.href = "/admin.html"; // ê´€ë¦¬ì í˜ì´ì§€ë¡œ ì´ë™
                };
                const registerButton = document.getElementById("register");
                buttonGroup.insertBefore(adminButton, registerButton);
                }
              }
            } else {
              console.error("ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
          } catch (error) {
            console.error("ì‚¬ìš©ì ì •ë³´ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
          }
        } else {
          // ë¡œê·¸ì•„ì›ƒ ìƒíƒœ
          authButton.textContent = "ë¡œê·¸ì¸";
          authButton.onclick = goToLogin;
        }
      }

      function logout() {
        fetch("/api/logout", { method: "POST" })
          .then((response) => {
            if (response.ok) {
              alert("ë¡œê·¸ì•„ì›ƒ ì„±ê³µ");
              window.location.href = "../index.html";
              updateAuthButton();
            } else {
              throw new Error("ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨");
            }
          })
          .catch((error) => console.error("ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error));
      }

      function parseJwt(token) {
        const base64Url = token.split(".")[1];
        const base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
        const jsonPayload = decodeURIComponent(
          atob(base64)
            .split("")
            .map((c) => "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2))
            .join("")
        );
        return JSON.parse(jsonPayload);
      }

      async function loadLikedProducts() {
        const token = document.cookie
          .split("; ")
          .find((row) => row.startsWith("token="))
          ?.split("=")[1];
        // ì‚¬ìš©ì ID ì¶”ì¶œ
        const memberInfo = parseJwt(token);
        const userId = memberInfo.id;

        try {
          const response = await fetch(`/api/products/liked?userId=${userId}`);
          if (!response.ok)
            throw new Error("ì°œí•œ ìƒí’ˆ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
          const likedProducts = await response.json();

          const contentArea = document.getElementById("content-area");
          if (likedProducts.length === 0) {
            contentArea.innerHTML = "<p>ì°œí•œ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>";
            return;
          }

          contentArea.innerHTML =
            '<div class="product-list" id="liked-products"></div>';
          const productList = document.getElementById("liked-products");

          likedProducts.forEach((product) => {
            const productItem = document.createElement("div");
            productItem.className = "product-item";

            productItem.innerHTML = `
              <a href="/productDetails.html?id=${product._id}&from=mypage">
              <img src="${product.image}" alt="${product.name}" />
              <h3>${product.name} <span class="like-icon">â˜…</span> ${
              product.likes
            }</h3>
              <p class="price">${product.currentPrice.toLocaleString()}ì›</p>
              <p>${product.description}</p>
            `;

            productList.appendChild(productItem);
          });
        } catch (error) {
          console.error("ì°œí•œ ìƒí’ˆ ëª©ë¡ ë¡œë“œ ì¤‘ ì˜¤ë¥˜:", error);
          document.getElementById("content-area").innerHTML =
            "<p>ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>";
        }
      }

      async function loadRegisteredProducts() {
        const token = document.cookie
          .split("; ")
          .find((row) => row.startsWith("token="))
          ?.split("=")[1];
        // ì‚¬ìš©ì ID ì¶”ì¶œ
        const memberInfo = parseJwt(token);
        const userId = memberInfo.id;

        try {
          const response = await fetch(
            `/api/products/registered?userId=${userId}`
          );
          if (!response.ok)
            throw new Error(
              "ë“±ë¡ì¤‘ì¸ ê²½ë§¤ ìƒí’ˆ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."
            );
          const registeredProducts = await response.json();

          const contentArea = document.getElementById("content-area");
          if (registeredProducts.length === 0) {
            contentArea.innerHTML = "<p>ë“±ë¡ì¤‘ì¸ ê²½ë§¤ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>";
            return;
          }

          contentArea.innerHTML =
            '<div class="product-list" id="registered-products"></div>';
          const productList = document.getElementById("registered-products");

          registeredProducts.forEach((product) => {
            const productItem = document.createElement("div");
            productItem.className = "product-item";

            productItem.innerHTML = `
            <a href="/productDetails.html?id=${product._id}&from=mypage">
            <img src="${product.image}" alt="${product.name}" />
            <h3>${product.name} <span class="like-icon">â˜…</span> ${
              product.likes
            }</h3>
            <p class="price">${product.currentPrice.toLocaleString()}ì›</p>
            <p>${product.description}</p>
          `;

            productList.appendChild(productItem);
          });
        } catch (error) {
          console.error("ì°œí•œ ìƒí’ˆ ëª©ë¡ ë¡œë“œ ì¤‘ ì˜¤ë¥˜:", error);
          document.getElementById("content-area").innerHTML =
            "<p>ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>";
        }
      }

      async function submitInquiry() {
        const token = document.cookie
          .split("; ")
          .find((row) => row.startsWith("token="))
          ?.split("=")[1];
        // ì‚¬ìš©ì ID ì¶”ì¶œ
        const memberInfo = parseJwt(token);
        const userId = memberInfo.id;

        const title = document.getElementById("title").value;
        const message = document.getElementById("message").value;

        try {
          const response = await fetch(`/api/inquiry/${userId}`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ title, message }),
          });

          if (!response.ok) throw new Error("ë¬¸ì˜ ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");

          const result = await response.json();
          alert(result.message);

          // í¼ ì´ˆê¸°í™”
          document.getElementById("inquiry-form").reset();
        } catch (error) {
          console.error(error);
          alert("ë¬¸ì˜ ì œì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
      }

      async function loadInquiryHistory() {
        const token = document.cookie
          .split("; ")
          .find((row) => row.startsWith("token="))
          ?.split("=")[1];
        // ì‚¬ìš©ì ID ì¶”ì¶œ
        const memberInfo = parseJwt(token);
        const userId = memberInfo.id;

        try {
          const response = await fetch(`/api/inquiries/${userId}`, {
            method: "GET",
          });
          if (!response.ok)
            throw new Error("ë¬¸ì˜ ë‚´ì—­ì„ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");

          const inquiryData = await response.json();
          const inquiries = inquiryData.flatMap((data) => data.inquiries);
          const contentArea = document.getElementById("content-area");

          // HTML ìƒì„±
          let inquiryHTML = `<div class="inquiry-history-container">

            <div class="answered-inquiries">
              <h3>ë‹µë³€ ì™„ë£Œëœ ë¬¸ì˜</h3>`;

          // ë‹µë³€ ì™„ë£Œëœ ë¬¸ì˜
          const answeredInquiries = inquiries.filter(
            (inquiry) => inquiry.answer
          );
          if (answeredInquiries.length === 0) {
            inquiryHTML += `<p>ë‹µë³€ ì™„ë£Œëœ ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
          } else {
            answeredInquiries.forEach((inquiry) => {
              inquiryHTML += `
                <div class="inquiry-item">
                  <p><strong>ì œëª©:</strong> ${inquiry.title || "ì œëª© ì—†ìŒ"}</p>
                  <p><strong>ë‚´ìš©:</strong> ${
                    inquiry.message || "ë‚´ìš© ì—†ìŒ"
                  }</p>
                  <p><strong>ë‚ ì§œ:</strong> ${
                    new Date(inquiry.date).toLocaleString() || "ë‚ ì§œ ì—†ìŒ"
                  }</p>
                  <p><strong>ë‹µë³€ ìƒíƒœ:</strong> <span class="answer-completed">ë‹µë³€ ì™„ë£Œ</span></p>
                  <p><strong>ê´€ë¦¬ì ë‹µë³€:</strong> ${
                    inquiry.answer || "ë‹µë³€ ì—†ìŒ"
                  }</p>
                </div>`;
            });
          }

          inquiryHTML += `</div><div class="unanswered-inquiries">
            <h3>ë‹µë³€ë˜ì§€ ì•Šì€ ë¬¸ì˜</h3>`;

          // ë‹µë³€ë˜ì§€ ì•Šì€ ë¬¸ì˜
          const unansweredInquiries = inquiries.filter(
            (inquiry) => !inquiry.answer
          );
          if (unansweredInquiries.length === 0) {
            inquiryHTML += `<p>ë‹µë³€ë˜ì§€ ì•Šì€ ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
          } else {
            unansweredInquiries.forEach((inquiry) => {
              inquiryHTML += `
                <div class="inquiry-item">
                  <p><strong>ì œëª©:</strong> ${inquiry.title || "ì œëª© ì—†ìŒ"}</p>
                  <p><strong>ë‚´ìš©:</strong> ${
                    inquiry.message || "ë‚´ìš© ì—†ìŒ"
                  }</p>
                  <p><strong>ë‚ ì§œ:</strong> ${
                    inquiry.date
                      ? new Date(inquiry.date).toLocaleString()
                      : "ë‚ ì§œ ì—†ìŒ"
                  }</p>
                  <p><strong>ë‹µë³€ ìƒíƒœ:</strong> <span class="answer-pending">ë¯¸ë‹µë³€</span></p>
                </div>`;
            });
          }

          inquiryHTML += `</div></div>`;
          contentArea.innerHTML = inquiryHTML;
        } catch (error) {
          console.error("ë¬¸ì˜ ë‚´ì—­ ë¡œë“œ ì¤‘ ì˜¤ë¥˜:", error);
          document.getElementById("content-area").innerHTML =
            "<p>ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>";
        }
      }

      async function loadUpdateInfo() {
        const token = document.cookie
          .split("; ")
          .find((row) => row.startsWith("token="))
          ?.split("=")[1];
        // ì‚¬ìš©ì ID ì¶”ì¶œ
        const memberInfo = parseJwt(token);
        const userId = memberInfo.id;

        try {
          const response = await fetch(`/api/members/info?userId=${userId}`);
          if (!response.ok)
            throw new Error("íšŒì› ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");

          const { member } = await response.json();
          console.log(member);
          // ê°œì¸ì •ë³´ ìˆ˜ì • UI ìƒì„±
          const contentArea = document.getElementById("content-area");
          contentArea.innerHTML = `
            <div class="personal-info-container">
              <h2>ê°œì¸ì •ë³´ í™•ì¸/ìˆ˜ì •</h2>

              <!-- ì´ë©”ì¼ì€ ìˆ˜ì • ë¶ˆê°€ -->
              <div class="info-item">
                <label>ì´ë©”ì¼:</label>
                <span>${member.email}</span>
              </div>

              <!-- íœ´ëŒ€ì „í™” -->
              <div class="info-item">
                <label>íœ´ëŒ€ì „í™”:</label>
                <input type="text" id="mobile_number" value="${member.mobile_number}" disabled />
                <div class="custom-button-group">
                  <button onclick="enableEdit('mobile_number')">ìˆ˜ì •</button>
                  <button onclick="saveEdit('mobile_number', '${userId}')">ì €ì¥</button>
                </div>
              </div>

              <!-- ì£¼ì†Œ -->
              <h3>ì£¼ì†Œ</h3>
              <div class="info-item">
                <label>ìš°í¸ë²ˆí˜¸:</label>
                <input type="text" id="sample6_postcode" value="${member.sample6_postcode}" disabled />
              </div>
              <div class="info-item">
                <label>ê¸°ë³¸ ì£¼ì†Œ:</label>
                <input type="text" id="sample6_address" value="${member.sample6_address}" disabled />
              </div>
              <div class="info-item">
                <label>ìƒì„¸ ì£¼ì†Œ:</label>
                <input type="text" id="sample6_detailAddress" value="${member.sample6_detailAddress}" disabled />
              </div>
              <div class="custom-button-group">
                <button onclick="enableAddressEdit()">ì£¼ì†Œ ìˆ˜ì •</button>
                <button onclick="saveAddressEdit('${userId}')">ì£¼ì†Œ ì €ì¥</button>
                <button type="button" onclick="sample6_execDaumPostcode()">ì£¼ì†Œì°¾ê¸°</button>
              </div>
            </div>
          `;
        } catch (error) {
          console.error("íšŒì› ì •ë³´ ë¡œë“œ ì¤‘ ì˜¤ë¥˜:", error);
          alert("íšŒì› ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
      }

      function enableEdit(fieldId) {
        const inputField = document.getElementById(fieldId);
        inputField.disabled = false;
        inputField.focus(); // ì…ë ¥ í•„ë“œì— í¬ì»¤ìŠ¤ ì„¤ì •
      }

      async function saveEdit(fieldId, userId) {
        const newValue = document.getElementById(fieldId).value;

        try {
          const response = await fetch(`/api/members/update`, {
            method: "PUT",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              userId,
              [fieldId]: newValue,
            }),
          });

          if (!response.ok) throw new Error("ì •ë³´ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");

          const result = await response.json();
          alert(result.message);

          // ìˆ˜ì • í›„ ì…ë ¥ í•„ë“œë¥¼ ë¹„í™œì„±í™”
          document.getElementById(fieldId).disabled = true;
        } catch (error) {
          console.error("ìˆ˜ì • ì¤‘ ì˜¤ë¥˜:", error);
          alert("ì •ë³´ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
      }

      function enableAddressEdit() {
        document.getElementById("sample6_postcode").disabled = false;
        document.getElementById("sample6_address").disabled = false;
        document.getElementById("sample6_detailAddress").disabled = false;

        document.getElementById("sample6_postcode").focus(); // ìš°í¸ë²ˆí˜¸ í•„ë“œì— í¬ì»¤ìŠ¤
      }

      async function saveAddressEdit(userId) {
        const sample6_postcode =
          document.getElementById("sample6_postcode").value;
        const sample6_address =
          document.getElementById("sample6_address").value;
        const sample6_detailAddress = document.getElementById(
          "sample6_detailAddress"
        ).value;

        try {
          const response = await fetch(`/api/members/update`, {
            method: "PUT",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              userId,
              sample6_postcode,
              sample6_address,
              sample6_detailAddress,
            }),
          });

          if (!response.ok) throw new Error("ì£¼ì†Œ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");

          const result = await response.json();
          alert(result.message);

          // ìˆ˜ì • í›„ ì…ë ¥ í•„ë“œë¥¼ ë¹„í™œì„±í™”
          document.getElementById("sample6_postcode").disabled = true;
          document.getElementById("sample6_address").disabled = true;
          document.getElementById("sample6_detailAddress").disabled = true;
        } catch (error) {
          console.error("ì£¼ì†Œ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜:", error);
          alert("ì£¼ì†Œ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
      }
    </script>
  </head>
  <body>
    <div class="header">
      <div class="logo-container" onclick="goToMain()">
        <img
          src="./images/free-icon-auction-3211435.png"
          alt="Bid Icon"
          class="icon-small"
        />
        <span class="site-title">
          <span>ê±°</span><span>ë˜</span><span>í•´</span><span>ìš”</span>
          <span>&nbsp;</span>
          <span>ê²½</span><span>ë§¤</span><span>ì˜</span><span>ìˆ²</span>
        </span>
      </div>

      <!-- ê°€ìš´ë° ê²€ìƒ‰ì°½ -->
      <div class="search-container">
        <input
          type="text"
          class="search-bar"
          placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
        />
        <span class="search-icon">ğŸ”</span>
      </div>

      <div class="button-group">
        <button class="register" onclick="goToRegister()">ìƒí’ˆ ë“±ë¡</button>
        <button class="login-button" onclick="goToLogin()">ë¡œê·¸ì¸</button>
        <button class="my-page" onclick="showMyPage()">ë§ˆì´í˜ì´ì§€</button>
      </div>
    </div>

    <div class="container">
      <!-- ì™¼ìª½ ë§ˆì´í˜ì´ì§€ ë©”ë‰´ -->
      <div class="mypage-menu">
        <h3>MY ë©”ë‰´</h3>
        <ul>
          <li onclick="showContent('interest')">ê´€ì‹¬ìˆëŠ” ê²½ë§¤ ìƒí’ˆ</li>
          <li onclick="showContent('participating')">ë“±ë¡ì¤‘ì¸ ê²½ë§¤ ìƒí’ˆ</li>
          <li onclick="showContent('inquiry')">ë¬¸ì˜í•˜ê¸°</li>
          <li onclick="showContent('inquiry-history')">ë¬¸ì˜ë‚´ì—­ í™•ì¸</li>
          <li onclick="showContent('personal-info')">ê°œì¸ì •ë³´í™•ì¸/ìˆ˜ì •</li>
          <li onclick="showContent('address-management')">ë°°ì†¡ì§€ê´€ë¦¬</li>
        </ul>
      </div>

      <!-- ì˜¤ë¥¸ìª½ ë‚´ìš© í‘œì‹œ ì˜ì—­ -->
      <div class="content-area" id="content-area">
        <h2>ë§ˆì´í˜ì´ì§€</h2>
        <p>ì™¼ìª½ ë©”ë‰´ì—ì„œ í•­ëª©ì„ ì„ íƒí•˜ë©´ ê´€ë ¨ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
      </div>
    </div>

    <!-- ì™¼ìª½ ì—¬ë°±ì— ë¬¼ìŒí‘œ ë²„íŠ¼ ì¶”ê°€ -->
    <div class="left-sidebar">
      <img
        src="./images/ë¬¼ìŒí‘œ.png"
        alt="Icon 1"
        onclick="showPopup('ğŸŒ³ë§ˆì´í˜ì´ì§€ğŸŒ³')"
      />
      <div class="text-box">
        <span class="blink-text">ë¬¼ìŒí‘œë¥¼ í´ë¦­í•´ë³´ì„¸ìš”!</span>
      </div>
    </div>

    <!-- íŒì—…ì°½ -->
    <div class="overlay" id="popupOverlay" onclick="hidePopup()"></div>
    <div class="popup" id="popupContent">
      <h2 id="popupText"></h2>
      <p>
        "ë§ˆì´í˜ì´ì§€"ëŠ” íšŒì›ë‹˜ì˜ ê²½ë§¤ í™œë™ê³¼ ê°œì¸ ì •ë³´ë¥¼ í•œëˆˆì— í™•ì¸í•˜ê³  ê´€ë¦¬í• 
        ìˆ˜ ìˆëŠ” ê³µê°„ì…ë‹ˆë‹¤. <br />
        ê²½ë§¤ ì°¸ì—¬ì™€ ê´€ë ¨ëœ ëª¨ë“  ì •ë³´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!
      </p>
      <p><strong>ğŸ’¡ ì£¼ìš” ê¸°ëŠ¥</strong></p>
      <ul>
        <li>
          â¤ï¸ <strong>ê´€ì‹¬ ìƒí’ˆ ê´€ë¦¬:</strong> ê´€ì‹¬ ìˆëŠ” ê²½ë§¤ ìƒí’ˆì„ ì €ì¥í•˜ê³ 
          í•œê³³ì—ì„œ í™•ì¸
        </li>
        <li>
          ğŸ“¦ <strong>ë“±ë¡ ìƒí’ˆ í™•ì¸:</strong> ë‚´ê°€ ë“±ë¡í•œ ìƒí’ˆì˜ ìƒíƒœì™€ ìƒì„¸
          ì •ë³´ í™•ì¸
        </li>
        <li>
          ğŸ“„ <strong>ë¬¸ì˜ ë° ë‚´ì—­ ê´€ë¦¬:</strong> ìƒí’ˆ ê´€ë ¨ ë¬¸ì˜ í™•ì¸ ë° ë‹µë³€
          ê´€ë¦¬
        </li>
        <li>ğŸ”’ <strong>ê°œì¸ì •ë³´ ìˆ˜ì •:</strong> íšŒì› ì •ë³´ ë° ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</li>
        <li>ğŸšš <strong>ë°°ì†¡ì§€ ê´€ë¦¬:</strong> ë°°ì†¡ ì •ë³´ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •</li>
      </ul>

      <button onclick="hidePopup()">ë‹«ê¸°</button>
    </div>

    <script>
      // íŒì—… ì—´ê¸°
      function showPopup(content) {
        document.getElementById("popupText").innerText = content;
        document.getElementById("popupOverlay").style.display = "block";
        document.getElementById("popupContent").style.display = "block";
      }

      // íŒì—… ë‹«ê¸°
      function hidePopup() {
        document.getElementById("popupOverlay").style.display = "none";
        document.getElementById("popupContent").style.display = "none";
      }
    </script>
  </body>
</html>
